<jnt-app-content>
  <jnt-app-body>
    <jnt-container [width]="ui.width.fluid">
      <jnt-stack [gutter]="ui.gutter.large">
        <jnt-link [icon]="ui.icons.settings"
                  source="/admin/development/team/"
                  target="_blank"
                  title="Manage"
                  i18n-title="@@action.manage"></jnt-link>

        <jnt-stack [type]="ui.layout.stack.type.horizontal"
                   [wrap]="ui.flex.wrap.wrap">
          <ng-container *ngIf="loading; then loadingTemplate; else teamsTemplate"></ng-container>
          <ng-template #loadingTemplate>
            <div *ngFor="let i of 5 | mockArray" team>
              <jnt-block [width]="ui.width.fluid" block>
                <jnt-stack [align]="ui.flex.align.center">
                  <jnt-skeleton [lines]="1"></jnt-skeleton>
                  <jnt-skeleton [type]="ui.layout.skeleton.type.avatar"></jnt-skeleton>
                  <jnt-skeleton [lines]="1"></jnt-skeleton>
                </jnt-stack>
              </jnt-block>
            </div>
          </ng-template>
          <ng-template #teamsTemplate>
            <a *ngFor="let team of teams" [routerLink]="[team.id]" team>
              <jnt-block [title]="team.title"
                         [padding]="ui.gutter.none" block>
                <jnt-label problems *ngIf="team.metrics.problemsCount"
                           [icon]="ui.icons.warning"
                           [color]="ui.color.red"
                           [label]="team.metrics.problemsCount.toString()"></jnt-label>
                <jnt-avatars-group avatars [size]="ui.size.normal">
                  <jnt-avatar *ngFor="let member of team.members"
                              [image]="member.user.avatar">
                  </jnt-avatar>
                </jnt-avatars-group>
                <ng-template #blockFooterTemplate>
                  <div footer>
                    <div><b>{{!!team.metrics.issues.openedEstimated ? (team.metrics.issues.openedEstimated |
                      duration:durationFormat.short) : '&ndash;'}}</b>
                      hours for <b>{{team.metrics.issues.openedCount || '&ndash;'}}</b> tasks
                    </div>
                  </div>
                </ng-template>
              </jnt-block>
            </a>
          </ng-template>
        </jnt-stack>
        <ng-container *ngIf="pagesCount > 1">
          <jnt-form [formGroup]="form">
            <jnt-pagination [pagesCount]="pagesCount" formControlName="page"></jnt-pagination>
          </jnt-form>
        </ng-container>
      </jnt-stack>
    </jnt-container>
  </jnt-app-body>
  <app-footer></app-footer>
</jnt-app-content>
