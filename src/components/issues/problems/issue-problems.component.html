<jnt-block [fluid]="true">
  <jnt-table [filter]="filter">
    <jnt-table-column i18n-title="@@title" title="Issue" sort="title">
      <ng-template #cellTemplate let-title="issue.title" let-labels="labels" let-url="issue.glUrl">
        <jnt-stack [type]="ui.stack.type.horizontal">
          <jnt-link [source]=url target="_blank" [class.closed]="state == issuesState.closed">{{title}}</jnt-link>
          <jnt-stack [type]="ui.stack.type.horizontal" [gutter]="ui.stack.gutter.small">
            <jnt-label *ngFor="let l of labels" [color]="l.color" [label]="l.title"></jnt-label>
          </jnt-stack>
        </jnt-stack>
      </ng-template>
    </jnt-table-column>

    <jnt-table-column i18n-title="@@project" title="Project">
      <ng-template #cellTemplate let-project="issue.project">
        {{project.presentation}}
      </ng-template>
    </jnt-table-column>

    <jnt-table-column i18n-title="@@due_date" title="Due date">
      <ng-template #cellTemplate let-dueDate="issue.dueDate" let-problems="problems">
        {{dueDate | date}}
        <span class="error" *ngIf="problems?.includes(issueProblemType.emptyDueDate)">empty</span>
        <span class="error" *ngIf="problems?.includes(issueProblemType.overDueDate)">overdue</span>
      </ng-template>
    </jnt-table-column>

    <jnt-table-column i18n-title="@@est" title="Est">
      <ng-template #cellTemplate let-problems="problems" let-timeEstimate="issue.timeEstimate">
        {{timeEstimate | duration}}
        <span class="error" *ngIf="problems?.includes(issueProblemType.emptyEstimate)">empty</span>
      </ng-template>
    </jnt-table-column>
  </jnt-table>
</jnt-block>
