<jnt-block [padding]="ui.gutter.none" [width]="ui.width.fluid">
  <jnt-form [formGroup]="form">
    <jnt-table #table (reloaded)="reloaded.emit()" formControlName="table">
      <ng-template *ngIf="view === viewType.extended" #filters>
        <jnt-stack [type]="ui.layout.stack.type.horizontal">
          <jnt-switcher formControlName="state">
            <jnt-switcher-option i18n-label="@@action.filter_type_all" label="All" [value]="timeExpensesState.all">
              <jnt-badge *ngIf="!!summary?.spent"
                         [value]="summary.spent | duration">
              </jnt-badge>
            </jnt-switcher-option>
            <jnt-switcher-option i18n-label="@@action.filter_type_closed" label="Closed" [value]="timeExpensesState.closed">
              <jnt-badge *ngIf="!!summary?.closedSpent"
                         [value]="summary.closedSpent | duration">
              </jnt-badge>
            </jnt-switcher-option>
            <jnt-switcher-option i18n-label="@@action.filter_type_opened" label="Opened" [value]="timeExpensesState.opened">
              <jnt-badge *ngIf="!!summary?.openedSpent"
                         [value]="summary.openedSpent | duration"
                         [color]="ui.color.green">
              </jnt-badge>
            </jnt-switcher-option>
          </jnt-switcher>
        </jnt-stack>
      </ng-template>
      <jnt-table-column i18n-title="@@label.title" title="Title" sort="title">
        <ng-template #cellTemplate let-owner="owner">
          <app-issue [issue]="owner"></app-issue>
        </ng-template>
      </jnt-table-column>

      <jnt-table-column i18n-title="@@label.created_at" title="Created at" sort="created_at">
        <ng-template #cellTemplate let-createdAt="createdAt">
          {{createdAt | date:'medium'}}
        </ng-template>
      </jnt-table-column>

      <jnt-table-column i18n-title="@@label.spent" title="Spent">
        <ng-template #cellTemplate let-timeSpent="timeSpent">
          {{timeSpent | duration}}
        </ng-template>
      </jnt-table-column>

      <jnt-table-column i18n-title="@@label.earn" title="Earn">
        <ng-template #cellTemplate let-sum="sum">
          {{!!sum ? (sum | currency) : '&mdash;'}}
        </ng-template>
      </jnt-table-column>
    </jnt-table>
  </jnt-form>
</jnt-block>
