<jnt-block [padding]="ui.gutter.none"
           [state]="loading ? ui.state.loading : null"
           [width]="ui.width.fluid">
  <jnt-form [formGroup]="form">
    <jnt-gantt [type]="ui.gantt.type.year">
      <ng-template #titleTemplate>
        <strong>Developer</strong>
      </ng-template>
      <jnt-gantt-line *ngFor="let user of usersWorkbreaks"
                      [title]="user.name">
        <ng-template #title>
          <jnt-stack [orientation]="ui.orientation.horizontal" [align]="ui.align.center">
            <jnt-avatar avatar [image]="user?.avatar"
                        [size]="ui.size.small"></jnt-avatar>
            <div>
              <jnt-link link [title]="user?.name"></jnt-link>
            </div>
          </jnt-stack>
        </ng-template>
        <jnt-gantt-line-period *ngFor="let workBreak of user.workBreaks"
                               [from]="workBreak.fromDate"
                               [to]="workBreak.toDate">

          <ng-template #indicatorYear let-current="current" let-today="today">
            <div [attr.accepting]="workBreak['approveState'] === approveStates.created"
                 [attr.accepted]="workBreak['approveState'] === approveStates.approved"
                 [attr.declined]="workBreak['approveState'] === approveStates.declined"
                 [attr.short]="workBreak['toDate'] | dfnsDifferenceInMonths:workBreak['fromDate'] < 2"
                 [attr.over-from]="(workBreak['fromDate'] | dfnsGetYear) < (current | dfnsGetYear)"
                 [attr.over-to]="(workBreak['toDate'] | dfnsGetYear) > (current | dfnsGetYear)" period>
                            <span label>
                              {{(workBreak['toDate'] | dfnsDifferenceInDays:workBreak['fromDate']) + 1 }} days
                            </span>
            </div>
          </ng-template>

        </jnt-gantt-line-period>
      </jnt-gantt-line>
    </jnt-gantt>
  </jnt-form>
</jnt-block>
