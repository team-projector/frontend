<jnt-informer *ngIf="errors.length > 0"
              (ok)="errors = []">
  <jnt-informer-message *ngFor="let error of errors"
                        [message]="error.toString()"></jnt-informer-message>
</jnt-informer>

<jnt-form [formGroup]="form"
          [state]="progress.saving ? ui.state.loading : null"
          (submitted)="save()">
  <jnt-stack [orientation]="ui.orientation.vertical" [align]="ui.align.stretch">
    <jnt-form-item *ngIf="view === viewType.leader">
      <jnt-form-label i18n="@@label.developer">Developer</jnt-form-label>
      <jnt-select developers
                  placeholder="Developer"
                  i18n-placeholder="@@label.developer"
                  formControlName="user">
        <jnt-select-option *ngIf="!!user"
                           [label]="user.name"
                           [key]="user.id">
        </jnt-select-option>
        <jnt-select-option *ngFor="let member of members"
                           [label]="member.user.name"
                           [key]="member.user.id">
        </jnt-select-option>
      </jnt-select>
    </jnt-form-item>

    <jnt-row>
      <jnt-col tablet="6">
        <jnt-form-item>
          <jnt-form-label for="fromDate"
                          i18n="@@label.from_date">From
          </jnt-form-label>
          <jnt-form-control name="fromDate">
            <jnt-date-picker placeholder="Start date" formControlName="fromDate"></jnt-date-picker>
            <jnt-form-message [validator]="ui.validator.required">
              This field is required
            </jnt-form-message>
          </jnt-form-control>
        </jnt-form-item>
      </jnt-col>
      <jnt-col tablet="6">
        <jnt-form-item>
          <jnt-form-label for="toDate"
                          i18n="@@label.to_date">To
          </jnt-form-label>
          <jnt-form-control name="toDate">
            <jnt-date-picker placeholder="To date" formControlName="toDate"></jnt-date-picker>
            <jnt-form-message [validator]="ui.validator.required">
              This field is required
            </jnt-form-message>
          </jnt-form-control>
        </jnt-form-item>
      </jnt-col>
    </jnt-row>

    <jnt-form-item>
      <jnt-form-label i18n="@@label.reason" for="reason">Reason</jnt-form-label>
      <jnt-form-control name="reason">
        <jnt-switcher formControlName="reason"
                      [orientation]="ui.orientation.horizontal">
          <jnt-switcher-option label="Dayoff"
                               i18n-label="@@action.dayoff"
                               [value]="reasons.dayoff">
            <jnt-dot [color]="ui.color.yellow"></jnt-dot>
          </jnt-switcher-option>
          <jnt-switcher-option label="Disease"
                               i18n-label="@@action.disease"
                               [value]="reasons.disease">
            <jnt-dot [color]="ui.color.red"></jnt-dot>
          </jnt-switcher-option>
          <jnt-switcher-option label="Vacation"
                               i18n-label="@@action.vacation"
                               [value]="reasons.vacation">
            <jnt-dot [color]="ui.color.green"></jnt-dot>
          </jnt-switcher-option>
        </jnt-switcher>
        <jnt-form-message [validator]="ui.validator.required">
          This field is required
        </jnt-form-message>
      </jnt-form-control>
    </jnt-form-item>

    <jnt-form-item>
      <jnt-form-label for="paidDays"
                      i18n="@@label.paid_days">Paid Days
      </jnt-form-label>
      <jnt-form-control name="paidDays">
        <jnt-input formControlName="paidDays"
                   [type]="ui.input.type.number"></jnt-input>
      </jnt-form-control>
    </jnt-form-item>

    <jnt-form-item>
      <jnt-form-label for="comment"
                      i18n="@@label.comment">Comment
      </jnt-form-label>
      <jnt-form-control name="comment">
        <jnt-input formControlName="comment"
                   placeholder="Comment"
                   [multiline]="true"
                   i18n-placeholder="@@label.comment"></jnt-input>
        <jnt-form-message [validator]="ui.validator.required">
          This field is required
        </jnt-form-message>
      </jnt-form-control>
    </jnt-form-item>
  </jnt-stack>

  <ng-template #formFooterTemplate>
    <jnt-button text="Save"
                i18n-text="@@action.save"
                [icon]="ui.icons.save"
                [width]="ui.width.fluid"
                [type]="ui.button.type.submit"
                [loading]="progress.saving"></jnt-button>
  </ng-template>
</jnt-form>
